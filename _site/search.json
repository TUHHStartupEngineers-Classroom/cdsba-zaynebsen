[
  {
    "objectID": "index.html",
    "href": "index.html",
    "title": "My Lab Journal",
    "section": "",
    "text": "This is a template example for lab journaling. Students in the data science courses at the Institute of Entrepreneurship will use this template to learn R for business analytics. Students can replace this text as they wish."
  },
  {
    "objectID": "index.html#how-to-use",
    "href": "index.html#how-to-use",
    "title": "My Lab Journal",
    "section": "How to use",
    "text": "How to use\n\nAccept the assignment and get your own github repo.\nBlog/journal what you are doing in R, by editing the .qmd files.\nSee the links page for lots of helpful links on learning R.\nChange everything to make it your own.\nMake sure to render you website every time before you want to upload changes."
  },
  {
    "objectID": "content/01_journal/02_statistics.html",
    "href": "content/01_journal/02_statistics.html",
    "title": "Statistical Concepts",
    "section": "",
    "text": "random_vars &lt;- readRDS(\"random_vars.rds\")\n\"expected value of age\"\n\n#&gt; [1] \"expected value of age\"\n\nmean(random_vars$age)\n\n#&gt; [1] 33.471\n\n\"expected value of income\"\n\n#&gt; [1] \"expected value of income\"\n\nmean(random_vars$income)\n\n#&gt; [1] 3510.731\n\n\n\n\"variance of age\"\n\n#&gt; [1] \"variance of age\"\n\nvar(random_vars$age)\n\n#&gt; [1] 340.6078\n\n\"variance of income\"\n\n#&gt; [1] \"variance of income\"\n\nvar(random_vars$income)\n\n#&gt; [1] 8625646\n\n\n\n\"std of age\"\n\n#&gt; [1] \"std of age\"\n\nsd(random_vars$age)\n\n#&gt; [1] 18.45556\n\n\"std of income\"\n\n#&gt; [1] \"std of income\"\n\nsd_income &lt;- sd(random_vars$income)\n\n\"The standard deviation of the income is a lot higher than the deviation of the age. This means that the samples of the income are more far to the mean and to each other. \"\n\n#&gt; [1] \"The standard deviation of the income is a lot higher than the deviation of the age. This means that the samples of the income are more far to the mean and to each other. \"\n\n\n\n\"covvariance of age and income\"\n\n#&gt; [1] \"covvariance of age and income\"\n\ncov(random_vars$age,random_vars$income)\n\n#&gt; [1] 29700.15\n\n\"correlation of age and income \"\n\n#&gt; [1] \"correlation of age and income \"\n\ncor(random_vars$age,random_vars$income)\n\n#&gt; [1] 0.5479432\n\n\"The correlation is easier to interpret because it provides a standardized scale. it is dimensionless.\"\n\n#&gt; [1] \"The correlation is easier to interpret because it provides a standardized scale. it is dimensionless.\"\n\n\n\n\"E[income/age&lt;=18]\"\n\n#&gt; [1] \"E[income/age&lt;=18]\"\n\nweighted.mean(random_vars[random_vars$age&lt;=  18,'income'])\n\n#&gt; [1] 389.6074\n\n\"E[income/age&lt;18 and &gt;65]\"\n\n#&gt; [1] \"E[income/age&lt;18 and &gt;65]\"\n\nweighted.mean(random_vars[random_vars$age&gt;18 & random_vars$age&lt;65 ,'income'])\n\n#&gt; [1] 4737.609\n\n\"E[income/age&gt;=65]\"\n\n#&gt; [1] \"E[income/age&gt;=65]\"\n\nweighted.mean(random_vars[random_vars$age&gt;=65 ,'income'])\n\n#&gt; [1] 1777.237"
  },
  {
    "objectID": "content/01_journal/04_causality.html",
    "href": "content/01_journal/04_causality.html",
    "title": "Causality",
    "section": "",
    "text": "library(tidyverse)\n\n#&gt; Warning: le package 'tidyverse' a été compilé avec la version R 4.3.2\n\n\n#&gt; Warning: le package 'ggplot2' a été compilé avec la version R 4.3.2\n\n\n#&gt; Warning: le package 'tibble' a été compilé avec la version R 4.3.2\n\n\n#&gt; Warning: le package 'tidyr' a été compilé avec la version R 4.3.2\n\n\n#&gt; Warning: le package 'readr' a été compilé avec la version R 4.3.2\n\n\n#&gt; Warning: le package 'purrr' a été compilé avec la version R 4.3.2\n\n\n#&gt; Warning: le package 'dplyr' a été compilé avec la version R 4.3.2\n\n\n#&gt; Warning: le package 'stringr' a été compilé avec la version R 4.3.2\n\n\n#&gt; Warning: le package 'forcats' a été compilé avec la version R 4.3.2\n\n\n#&gt; Warning: le package 'lubridate' a été compilé avec la version R 4.3.2\n\n\n#&gt; ── Attaching core tidyverse packages ──────────────────────── tidyverse 2.0.0 ──\n#&gt; ✔ dplyr     1.1.4     ✔ readr     2.1.4\n#&gt; ✔ forcats   1.0.0     ✔ stringr   1.5.0\n#&gt; ✔ ggplot2   3.4.4     ✔ tibble    3.2.1\n#&gt; ✔ lubridate 1.9.3     ✔ tidyr     1.3.0\n#&gt; ✔ purrr     1.0.2     \n#&gt; ── Conflicts ────────────────────────────────────────── tidyverse_conflicts() ──\n#&gt; ✖ dplyr::filter() masks stats::filter()\n#&gt; ✖ dplyr::lag()    masks stats::lag()\n#&gt; ℹ Use the conflicted package (&lt;http://conflicted.r-lib.org/&gt;) to force all conflicts to become errors\n\nlibrary(ggplot2)\nyears&lt;- c(1999,2000,2001,2002,2003,2004,2005,2006,2007,2008,2009)\nsuicides&lt;- c(5427,5688,6198,6462,6635,7336,7248,7491,8161,8578,9000)\nspending &lt;- c(18.079,18.594,19.753,20.734,20.831,23.029,23.597,23.584,25.525,27.731,29.449)\nscale= 300\ndata &lt;- data.frame(years,suicides,spending)\nggplot(data=data,aes(x=years,y=spending))+\n  geom_line(aes(color =\" Spending\"))+\n  geom_line(aes(y=suicides/scale,color=\"suicide\"))+\n  scale_y_continuous(sec.axis = sec_axis(~.*scale, name=\"suicide\")) +\n  labs(x = \"years\", y = \"Spending\", color = \"\") +\n  scale_color_manual(values = c(\"blue\", \"red\"))\n\n\n\n\n\n\n\nr&lt;- cor(suicides,spending)"
  },
  {
    "objectID": "content/01_journal/09_iv.html",
    "href": "content/01_journal/09_iv.html",
    "title": "Instrumental Variables",
    "section": "",
    "text": "Note\n\n\n\nYou can delete everything in here and start fresh."
  },
  {
    "objectID": "content/01_journal/07_matching.html",
    "href": "content/01_journal/07_matching.html",
    "title": "Matching and Subclassification",
    "section": "",
    "text": "library(dagitty)\n\n#&gt; Warning: le package 'dagitty' a été compilé avec la version R 4.3.2\n\nlibrary(ggdag)\n\n#&gt; Warning: le package 'ggdag' a été compilé avec la version R 4.3.2\n\n\n#&gt; \n#&gt; Attachement du package : 'ggdag'\n\n\n#&gt; L'objet suivant est masqué depuis 'package:stats':\n#&gt; \n#&gt;     filter\n\nmodel &lt;- dagify(\ncard~ sex,\nprev_avg_purch~ sex,\ncard~ age,\nprev_avg_purch~ age,\ncard~prev_avg_purch,\navg_purch~prev_avg_purch,\navg_purch~card,\ncoords = list( x= c(age = 1,prev_avg_purch=1,sex=2, avg_purch=2, card =3),\n                y = c(age = 0,prev_avg_purch=1,sex=0, avg_purch=2, card =1))\n)\nggdag(model) +\n  geom_dag_point(color = \"white\") +\n  geom_dag_text(color = \"blue\") +\n  geom_dag_edges(edge_color = \"blue\")\n\n\n\n\n\n\n\n\n\nmembership &lt;- readRDS(\"membership.rds\")\nE_0 &lt;- mean(membership[membership$card==F, ]$avg_purch) # control group\nE_1 &lt;- mean(membership[membership$card==T, ]$avg_purch) # treatment group\nE_1 - E_0\n\n#&gt; [1] 25.2195\n\nsummary(lm(avg_purch ~ card, membership))\n\n#&gt; \n#&gt; Call:\n#&gt; lm(formula = avg_purch ~ card, data = membership)\n#&gt; \n#&gt; Residuals:\n#&gt;      Min       1Q   Median       3Q      Max \n#&gt; -101.515  -20.684   -0.199   20.424  120.166 \n#&gt; \n#&gt; Coefficients:\n#&gt;             Estimate Std. Error t value Pr(&gt;|t|)    \n#&gt; (Intercept)  65.9397     0.3965  166.29   &lt;2e-16 ***\n#&gt; card         25.2195     0.6095   41.38   &lt;2e-16 ***\n#&gt; ---\n#&gt; Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1\n#&gt; \n#&gt; Residual standard error: 30.11 on 9998 degrees of freedom\n#&gt; Multiple R-squared:  0.1462, Adjusted R-squared:  0.1461 \n#&gt; F-statistic:  1712 on 1 and 9998 DF,  p-value: &lt; 2.2e-16\n\n\n\nlibrary(MatchIt)\n\n#&gt; Warning: le package 'MatchIt' a été compilé avec la version R 4.3.2\n\ncem &lt;- matchit(card~ age+sex+pre_avg_purch ,\n               data = membership, \n               method = 'cem', \n               estimand = 'ATE')\nsummary(cem)\n\n#&gt; \n#&gt; Call:\n#&gt; matchit(formula = card ~ age + sex + pre_avg_purch, data = membership, \n#&gt;     method = \"cem\", estimand = \"ATE\")\n#&gt; \n#&gt; Summary of Balance for All Data:\n#&gt;               Means Treated Means Control Std. Mean Diff. Var. Ratio eCDF Mean\n#&gt; age                 42.0331       39.1574          0.2136     1.1524    0.0438\n#&gt; sex                  0.5087        0.5002          0.0171          .    0.0086\n#&gt; pre_avg_purch       76.3938       66.0438          0.3962     1.0276    0.1092\n#&gt;               eCDF Max\n#&gt; age             0.0864\n#&gt; sex             0.0086\n#&gt; pre_avg_purch   0.1545\n#&gt; \n#&gt; Summary of Balance for Matched Data:\n#&gt;               Means Treated Means Control Std. Mean Diff. Var. Ratio eCDF Mean\n#&gt; age                 40.1743       40.1557          0.0014     0.9993    0.0016\n#&gt; sex                  0.5040        0.5040          0.0000          .    0.0000\n#&gt; pre_avg_purch       70.4611       70.0938          0.0141     0.9929    0.0044\n#&gt;               eCDF Max Std. Pair Dist.\n#&gt; age             0.0064          0.1222\n#&gt; sex             0.0000          0.0000\n#&gt; pre_avg_purch   0.0130          0.1558\n#&gt; \n#&gt; Sample Sizes:\n#&gt;               Control Treated\n#&gt; All           5768.      4232\n#&gt; Matched (ESS) 5429.65    3844\n#&gt; Matched       5716.      4164\n#&gt; Unmatched       52.        68\n#&gt; Discarded        0.         0\n\ndf_cem &lt;- match.data(cem)\n# Estimation\nmodel_cem &lt;- lm(avg_purch ~ card, data = df_cem, weights = weights)\nsummary(model_cem)\n\n#&gt; \n#&gt; Call:\n#&gt; lm(formula = avg_purch ~ card, data = df_cem, weights = weights)\n#&gt; \n#&gt; Weighted Residuals:\n#&gt;      Min       1Q   Median       3Q      Max \n#&gt; -159.349  -20.459   -0.151   19.863  161.528 \n#&gt; \n#&gt; Coefficients:\n#&gt;             Estimate Std. Error t value Pr(&gt;|t|)    \n#&gt; (Intercept)  69.9896     0.3984  175.66   &lt;2e-16 ***\n#&gt; card         15.2043     0.6137   24.77   &lt;2e-16 ***\n#&gt; ---\n#&gt; Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1\n#&gt; \n#&gt; Residual standard error: 30.12 on 9878 degrees of freedom\n#&gt; Multiple R-squared:  0.0585, Adjusted R-squared:  0.0584 \n#&gt; F-statistic: 613.7 on 1 and 9878 DF,  p-value: &lt; 2.2e-16\n\n# Custom coarsening\n# (1) Matching\ncutpoints &lt;- list(age = seq(25, 65, 20), pre_avg_purch = seq(10, 180, 50),sex= seq(0,1,3))\n                   \ncem_coars &lt;- matchit(card~ age + pre_avg_purch+sex,\n                     data = membership, \n                     method = 'cem', \n                     estimand = 'ATE',\n                     cutpoints = cutpoints)\n\n# Covariate balance\nsummary(cem_coars)\n\n#&gt; \n#&gt; Call:\n#&gt; matchit(formula = card ~ age + pre_avg_purch + sex, data = membership, \n#&gt;     method = \"cem\", estimand = \"ATE\", cutpoints = cutpoints)\n#&gt; \n#&gt; Summary of Balance for All Data:\n#&gt;               Means Treated Means Control Std. Mean Diff. Var. Ratio eCDF Mean\n#&gt; age                 42.0331       39.1574          0.2136     1.1524    0.0438\n#&gt; pre_avg_purch       76.3938       66.0438          0.3962     1.0276    0.1092\n#&gt; sex                  0.5087        0.5002          0.0171          .    0.0086\n#&gt;               eCDF Max\n#&gt; age             0.0864\n#&gt; pre_avg_purch   0.1545\n#&gt; sex             0.0086\n#&gt; \n#&gt; Summary of Balance for Matched Data:\n#&gt;               Means Treated Means Control Std. Mean Diff. Var. Ratio eCDF Mean\n#&gt; age                 40.4059       40.3587          0.0035     1.0033    0.0023\n#&gt; pre_avg_purch       71.8000       69.3858          0.0924     0.9964    0.0251\n#&gt; sex                  0.5036        0.5036          0.0000          .    0.0000\n#&gt;               eCDF Max Std. Pair Dist.\n#&gt; age             0.0089          0.4629\n#&gt; pre_avg_purch   0.0513          0.5535\n#&gt; sex             0.0000          0.0000\n#&gt; \n#&gt; Sample Sizes:\n#&gt;               Control Treated\n#&gt; All           5768.   4232.  \n#&gt; Matched (ESS) 5618.89 4041.93\n#&gt; Matched       5767.   4228.  \n#&gt; Unmatched        1.      4.  \n#&gt; Discarded        0.      0.\n\n# Plot grid\nlibrary(ggplot2)\n\n#&gt; Warning: le package 'ggplot2' a été compilé avec la version R 4.3.2\n\nlibrary(ggthemr)\nggthemr()\nggplot(df_cem, aes(x = age, y = pre_avg_purch,\n                         size = weights, color = as.factor(card))) +\n  geom_point(alpha = .2) +\n  geom_abline(data.frame(y = cutpoints$pre_avg_purch),\n              mapping = aes(intercept = y, slope = 0), \n              linewidth = 1.5, color = ggthemr::swatch()[5]) +\n  geom_vline(data.frame(y = cutpoints$age),\n              mapping = aes(xintercept = y),\n             linewidth = 1.5, color = ggthemr::swatch()[5]) +\n  theme(legend.position = \"none\")\n\n\n\n\n\n\n\nggplot(df_cem, aes(x = sex, y = pre_avg_purch,\n                         size = weights, color = as.factor(card))) +\n  geom_point(alpha = .2) +\n  geom_abline(data.frame(y = cutpoints$pre_avg_purch),\n              mapping = aes(intercept = y, slope = 0), \n              linewidth = 1.5, color = ggthemr::swatch()[5]) +\n  geom_vline(data.frame(y = cutpoints$sex),\n              mapping = aes(xintercept = y),\n             linewidth = 1.5, color = ggthemr::swatch()[5]) +\n  theme(legend.position = \"none\")\n\n\n\n\n\n\n\n\n\nnn &lt;- matchit(card~ age+sex+pre_avg_purch,\n              data = membership,\n              method = \"nearest\", # changed\n              distance = \"mahalanobis\", # changed\n              replace = T)\n\n# Covariate Balance\nsummary(nn)\n\n#&gt; \n#&gt; Call:\n#&gt; matchit(formula = card ~ age + sex + pre_avg_purch, data = membership, \n#&gt;     method = \"nearest\", distance = \"mahalanobis\", replace = T)\n#&gt; \n#&gt; Summary of Balance for All Data:\n#&gt;               Means Treated Means Control Std. Mean Diff. Var. Ratio eCDF Mean\n#&gt; age                 42.0331       39.1574          0.2064     1.1524    0.0438\n#&gt; sex                  0.5087        0.5002          0.0171          .    0.0086\n#&gt; pre_avg_purch       76.3938       66.0438          0.3936     1.0276    0.1092\n#&gt;               eCDF Max\n#&gt; age             0.0864\n#&gt; sex             0.0086\n#&gt; pre_avg_purch   0.1545\n#&gt; \n#&gt; Summary of Balance for Matched Data:\n#&gt;               Means Treated Means Control Std. Mean Diff. Var. Ratio eCDF Mean\n#&gt; age                 42.0331       41.9964          0.0026     1.0171    0.0014\n#&gt; sex                  0.5087        0.5087          0.0000          .    0.0000\n#&gt; pre_avg_purch       76.3938       76.2937          0.0038     1.0178    0.0012\n#&gt;               eCDF Max Std. Pair Dist.\n#&gt; age             0.0061          0.0281\n#&gt; sex             0.0000          0.0000\n#&gt; pre_avg_purch   0.0076          0.0301\n#&gt; \n#&gt; Sample Sizes:\n#&gt;               Control Treated\n#&gt; All           5768.      4232\n#&gt; Matched (ESS) 1992.19    4232\n#&gt; Matched       2677.      4232\n#&gt; Unmatched     3091.         0\n#&gt; Discarded        0.         0\n\n# Use matched data\ndf_nn &lt;- match.data(nn)\n\n# (2) Estimation\nmodel_nn &lt;- lm(avg_purch ~ card, data = df_nn, weights = weights)\nsummary(model_nn)\n\n#&gt; \n#&gt; Call:\n#&gt; lm(formula = avg_purch ~ card, data = df_nn, weights = weights)\n#&gt; \n#&gt; Weighted Residuals:\n#&gt;      Min       1Q   Median       3Q      Max \n#&gt; -132.730  -21.288   -1.675   18.318  146.631 \n#&gt; \n#&gt; Coefficients:\n#&gt;             Estimate Std. Error t value Pr(&gt;|t|)    \n#&gt; (Intercept)  76.5634     0.5881  130.19   &lt;2e-16 ***\n#&gt; card         14.5957     0.7514   19.42   &lt;2e-16 ***\n#&gt; ---\n#&gt; Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1\n#&gt; \n#&gt; Residual standard error: 30.43 on 6907 degrees of freedom\n#&gt; Multiple R-squared:  0.05179,    Adjusted R-squared:  0.05166 \n#&gt; F-statistic: 377.3 on 1 and 6907 DF,  p-value: &lt; 2.2e-16\n\n\n\n# Propensity scores\nmodel_prop &lt;- glm(card ~ age + pre_avg_purch + sex,\n                  data = membership,\n                  family = binomial(link = \"logit\"))\nsummary(model_prop)\n\n#&gt; \n#&gt; Call:\n#&gt; glm(formula = card ~ age + pre_avg_purch + sex, family = binomial(link = \"logit\"), \n#&gt;     data = membership)\n#&gt; \n#&gt; Coefficients:\n#&gt;                 Estimate Std. Error z value Pr(&gt;|z|)    \n#&gt; (Intercept)   -1.4298676  0.0752043 -19.013   &lt;2e-16 ***\n#&gt; age            0.0011486  0.0017761   0.647    0.518    \n#&gt; pre_avg_purch  0.0148262  0.0009264  16.003   &lt;2e-16 ***\n#&gt; sex            0.0359388  0.0412622   0.871    0.384    \n#&gt; ---\n#&gt; Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1\n#&gt; \n#&gt; (Dispersion parameter for binomial family taken to be 1)\n#&gt; \n#&gt;     Null deviance: 13626  on 9999  degrees of freedom\n#&gt; Residual deviance: 13249  on 9996  degrees of freedom\n#&gt; AIC: 13257\n#&gt; \n#&gt; Number of Fisher Scoring iterations: 4\n\n# Add propensities to table\nlibrary(dplyr)\n\n#&gt; Warning: le package 'dplyr' a été compilé avec la version R 4.3.2\n\n\n#&gt; \n#&gt; Attachement du package : 'dplyr'\n\n\n#&gt; Les objets suivants sont masqués depuis 'package:stats':\n#&gt; \n#&gt;     filter, lag\n\n\n#&gt; Les objets suivants sont masqués depuis 'package:base':\n#&gt; \n#&gt;     intersect, setdiff, setequal, union\n\nmembership_aug &lt;- membership%&gt;% mutate(propensity = predict(model_prop, type = \"response\"))\n# Extend data by IPW scores\nmembership_ipw &lt;- membership_aug %&gt;% mutate(\n  ipw = (card/propensity) + ((1-card) / (1-propensity)))\n\n# Look at data with IPW scores\nmembership_ipw %&gt;% \n  select(card, age, sex,pre_avg_purch, propensity, ipw)\n\n\n\n  \n\n\n# Estimation\nmodel_ipw &lt;- lm(avg_purch ~ card,\n                data = membership_ipw, \n                weights = ipw)\nsummary(model_ipw)\n\n#&gt; \n#&gt; Call:\n#&gt; lm(formula = avg_purch ~ card, data = membership_ipw, weights = ipw)\n#&gt; \n#&gt; Weighted Residuals:\n#&gt;      Min       1Q   Median       3Q      Max \n#&gt; -205.353  -28.995   -0.275   28.787  214.307 \n#&gt; \n#&gt; Coefficients:\n#&gt;             Estimate Std. Error t value Pr(&gt;|t|)    \n#&gt; (Intercept)  70.2628     0.4320  162.66   &lt;2e-16 ***\n#&gt; card         14.9573     0.6109   24.48   &lt;2e-16 ***\n#&gt; ---\n#&gt; Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1\n#&gt; \n#&gt; Residual standard error: 43.19 on 9998 degrees of freedom\n#&gt; Multiple R-squared:  0.05657,    Adjusted R-squared:  0.05647 \n#&gt; F-statistic: 599.5 on 1 and 9998 DF,  p-value: &lt; 2.2e-16\n\n# Plot \nggplot(membership_aug, aes(x = propensity)) +\n  geom_histogram(alpha = .8, color = \"white\")\n\n#&gt; `stat_bin()` using `bins = 30`. Pick better value with `binwidth`.\n\n\n\n\n\n\n\n\nmembership_ipw %&gt;% \n  select(card, age, pre_avg_purch,sex, propensity, ipw) %&gt;% \n  arrange(desc(ipw))\n\n\n\n  \n\n\nmodel_ipw_trim &lt;- lm(avg_purch ~ card,\n                data = membership_ipw %&gt;% filter(propensity %&gt;% between(0.15, 0.85)),\n                weights = ipw)\nsummary(model_ipw_trim)\n\n#&gt; \n#&gt; Call:\n#&gt; lm(formula = avg_purch ~ card, data = membership_ipw %&gt;% filter(propensity %&gt;% \n#&gt;     between(0.15, 0.85)), weights = ipw)\n#&gt; \n#&gt; Weighted Residuals:\n#&gt;      Min       1Q   Median       3Q      Max \n#&gt; -205.353  -28.995   -0.275   28.787  214.307 \n#&gt; \n#&gt; Coefficients:\n#&gt;             Estimate Std. Error t value Pr(&gt;|t|)    \n#&gt; (Intercept)  70.2628     0.4320  162.66   &lt;2e-16 ***\n#&gt; card         14.9573     0.6109   24.48   &lt;2e-16 ***\n#&gt; ---\n#&gt; Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1\n#&gt; \n#&gt; Residual standard error: 43.19 on 9998 degrees of freedom\n#&gt; Multiple R-squared:  0.05657,    Adjusted R-squared:  0.05647 \n#&gt; F-statistic: 599.5 on 1 and 9998 DF,  p-value: &lt; 2.2e-16"
  },
  {
    "objectID": "content/01_journal/05_dag.html",
    "href": "content/01_journal/05_dag.html",
    "title": "Directed Acyclic Graphs",
    "section": "",
    "text": "library(dagitty)\n\n#&gt; Warning: le package 'dagitty' a été compilé avec la version R 4.3.2\n\nlibrary(ggdag)\n\n#&gt; Warning: le package 'ggdag' a été compilé avec la version R 4.3.2\n\n\n#&gt; \n#&gt; Attachement du package : 'ggdag'\n\n\n#&gt; L'objet suivant est masqué depuis 'package:stats':\n#&gt; \n#&gt;     filter\n\nmodel &lt;- dagify(\nsales ~ location,\nparking_spots~ location,\nsales ~ parking_spots,\ncoords = list( x= c(sales = 3, location = 2,parking_spots = 1),\n                y = c(sales = 0, location = 1, parking_spots = 0))\n)\nggdag(model) +\n  geom_dag_point(color = \"white\") +\n  geom_dag_text(color = \"blue\") +\n  geom_dag_edges(edge_color = \"blue\")\n\n\n\n\n\n\n\n\n\ncustomer_sat &lt;- readRDS(\"customer_sat.rds\")\nmodel &lt;-lm(customer_sat$satisfaction~customer_sat$follow_ups)\nsummary(model)\n\n#&gt; \n#&gt; Call:\n#&gt; lm(formula = customer_sat$satisfaction ~ customer_sat$follow_ups)\n#&gt; \n#&gt; Residuals:\n#&gt;     Min      1Q  Median      3Q     Max \n#&gt; -12.412  -5.257   1.733   4.506  12.588 \n#&gt; \n#&gt; Coefficients:\n#&gt;                         Estimate Std. Error t value Pr(&gt;|t|)    \n#&gt; (Intercept)              78.8860     4.2717  18.467 1.04e-10 ***\n#&gt; customer_sat$follow_ups  -3.3093     0.6618  -5.001 0.000243 ***\n#&gt; ---\n#&gt; Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1\n#&gt; \n#&gt; Residual standard error: 7.923 on 13 degrees of freedom\n#&gt; Multiple R-squared:  0.658,  Adjusted R-squared:  0.6316 \n#&gt; F-statistic: 25.01 on 1 and 13 DF,  p-value: 0.0002427\n\nmodel2 &lt;- lm(customer_sat$satisfaction + customer_sat$follow_ups~ customer_sat$subscription)\nsummary(model2)\n\n#&gt; \n#&gt; Call:\n#&gt; lm(formula = customer_sat$satisfaction + customer_sat$follow_ups ~ \n#&gt;     customer_sat$subscription)\n#&gt; \n#&gt; Residuals:\n#&gt;    Min     1Q Median     3Q    Max \n#&gt;   -6.6   -1.6   -0.2    1.9    6.4 \n#&gt; \n#&gt; Coefficients:\n#&gt;                                   Estimate Std. Error t value Pr(&gt;|t|)    \n#&gt; (Intercept)                         53.600      2.013  26.623 4.84e-12 ***\n#&gt; customer_sat$subscriptionPremium    23.000      2.847   8.078 3.40e-06 ***\n#&gt; customer_sat$subscriptionPremium+   13.600      2.847   4.777 0.000451 ***\n#&gt; ---\n#&gt; Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1\n#&gt; \n#&gt; Residual standard error: 4.502 on 12 degrees of freedom\n#&gt; Multiple R-squared:  0.8461, Adjusted R-squared:  0.8205 \n#&gt; F-statistic: 32.99 on 2 and 12 DF,  p-value: 1.328e-05"
  },
  {
    "objectID": "content/01_journal/06_rct.html",
    "href": "content/01_journal/06_rct.html",
    "title": "Randomized Controlled Trials",
    "section": "",
    "text": "library(ggplot2)\n\n#&gt; Warning: le package 'ggplot2' a été compilé avec la version R 4.3.2\n\nabtest_online &lt;- readRDS(\"abtest_online.rds\")\ncompare_chatbot &lt;- \n  ggplot(abtest_online, \n         aes(x = purchase, \n             y = chatbot, \n             color = as.factor(purchase))) +\n  stat_summary(geom = \"errorbar\", \n               width = 1,\n               fun.data = \"mean_se\", \n               fun.args = list(mult=1.96),\n               show.legend = F) +\n  labs(x = NULL, y = \"chatbot\", title = \"Difference in chatbot\")\n\ncompare_previous_visit &lt;- \n  ggplot(abtest_online, \n         aes(x = purchase, \n             y = previous_visit, \n             color = as.factor(purchase))) +\n  stat_summary(geom = \"errorbar\", \n               width = 1,\n               fun.data = \"mean_se\", \n               fun.args = list(mult=1.96),\n               show.legend = F) +\n  labs(x = NULL, y = \"previous_visit\", title = \"Difference in previous_visit\")\n\ncompare_mobile_device &lt;- \n  ggplot(abtest_online, \n         aes(x = purchase, \n             y = mobile_device, \n             color = as.factor(purchase))) +\n  stat_summary(geom = \"errorbar\", \n               width = 1,\n               fun.data = \"mean_se\", \n               fun.args = list(mult=1.96),\n               show.legend = F) +\n  labs(x = NULL, y = \"mobile_device\", title = \"Difference in mobile_device\")\n\ncompare_purchase_amount &lt;- \n  ggplot(abtest_online, \n         aes(x = purchase, \n             y = purchase_amount, \n             color = as.factor(purchase))) +\n  stat_summary(geom = \"errorbar\", \n               width = 1,\n               fun.data = \"mean_se\", \n               fun.args = list(mult=1.96),\n               show.legend = F) +\n  labs(x = NULL, y = \"purchase_amount\", title = \"Difference in purchase_amount\")\n\ncompare_chatbot\n\n\n\n\n\n\n\ncompare_previous_visit\n\n\n\n\n\n\n\ncompare_mobile_device\n\n\n\n\n\n\n\ncompare_purchase_amount\n\n\n\n\n\n\n\nmodel &lt;- lm(purchase_amount~chatbot, data= abtest_online)\nsummary(model)\n\n#&gt; \n#&gt; Call:\n#&gt; lm(formula = purchase_amount ~ chatbot, data = abtest_online)\n#&gt; \n#&gt; Residuals:\n#&gt;     Min      1Q  Median      3Q     Max \n#&gt; -16.702 -14.478  -9.626  13.922  64.648 \n#&gt; \n#&gt; Coefficients:\n#&gt;             Estimate Std. Error t value Pr(&gt;|t|)    \n#&gt; (Intercept)  16.7017     0.8374  19.944  &lt; 2e-16 ***\n#&gt; chatbotTRUE  -7.0756     1.1796  -5.998 2.79e-09 ***\n#&gt; ---\n#&gt; Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1\n#&gt; \n#&gt; Residual standard error: 18.65 on 998 degrees of freedom\n#&gt; Multiple R-squared:  0.0348, Adjusted R-squared:  0.03383 \n#&gt; F-statistic: 35.98 on 1 and 998 DF,  p-value: 2.787e-09\n\n\n\nlm_mod &lt;- lm(purchase_amount ~ purchase * chatbot + purchase * previous_visit+purchase *mobile_device , data = abtest_online)\nsummary(lm_mod)\n\n#&gt; \n#&gt; Call:\n#&gt; lm(formula = purchase_amount ~ purchase * chatbot + purchase * \n#&gt;     previous_visit + purchase * mobile_device, data = abtest_online)\n#&gt; \n#&gt; Residuals:\n#&gt;    Min     1Q Median     3Q    Max \n#&gt; -32.22   0.00   0.00   0.00  48.40 \n#&gt; \n#&gt; Coefficients:\n#&gt;                              Estimate Std. Error t value Pr(&gt;|t|)    \n#&gt; (Intercept)                 1.618e-13  7.633e-01   0.000   1.0000    \n#&gt; purchase                    3.434e+01  1.084e+00  31.687   &lt;2e-16 ***\n#&gt; chatbotTRUE                 4.376e-15  7.410e-01   0.000   1.0000    \n#&gt; previous_visit             -5.214e-15  1.984e-01   0.000   1.0000    \n#&gt; mobile_deviceTRUE          -9.423e-15  7.668e-01   0.000   1.0000    \n#&gt; purchase:chatbotTRUE        2.363e+00  1.214e+00   1.946   0.0519 .  \n#&gt; purchase:previous_visit    -1.940e-01  2.794e-01  -0.694   0.4876    \n#&gt; purchase:mobile_deviceTRUE -8.148e-01  1.252e+00  -0.651   0.5153    \n#&gt; ---\n#&gt; Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1\n#&gt; \n#&gt; Residual standard error: 8.911 on 992 degrees of freedom\n#&gt; Multiple R-squared:  0.781,  Adjusted R-squared:  0.7795 \n#&gt; F-statistic: 505.4 on 7 and 992 DF,  p-value: &lt; 2.2e-16\n\n\n\nmodel&lt;-glm(purchase~chatbot+previous_visit+mobile_device, family=binomial(link='logit'), abtest_online)\nsummary(model)\n\n#&gt; \n#&gt; Call:\n#&gt; glm(formula = purchase ~ chatbot + previous_visit + mobile_device, \n#&gt;     family = binomial(link = \"logit\"), data = abtest_online)\n#&gt; \n#&gt; Coefficients:\n#&gt;                   Estimate Std. Error z value Pr(&gt;|z|)    \n#&gt; (Intercept)       -0.22185    0.12347  -1.797  0.07237 .  \n#&gt; chatbotTRUE       -0.96894    0.13564  -7.144 9.09e-13 ***\n#&gt; previous_visit     0.10606    0.03262   3.252  0.00115 ** \n#&gt; mobile_deviceTRUE -0.07119    0.14530  -0.490  0.62417    \n#&gt; ---\n#&gt; Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1\n#&gt; \n#&gt; (Dispersion parameter for binomial family taken to be 1)\n#&gt; \n#&gt;     Null deviance: 1329.1  on 999  degrees of freedom\n#&gt; Residual deviance: 1262.2  on 996  degrees of freedom\n#&gt; AIC: 1270.2\n#&gt; \n#&gt; Number of Fisher Scoring iterations: 4"
  },
  {
    "objectID": "content/01_journal/08_did.html",
    "href": "content/01_journal/08_did.html",
    "title": "Difference-in-Differences",
    "section": "",
    "text": "library(tidyverse)\n\n#&gt; Warning: le package 'tidyverse' a été compilé avec la version R 4.3.2\n\n\n#&gt; Warning: le package 'ggplot2' a été compilé avec la version R 4.3.2\n\n\n#&gt; Warning: le package 'tibble' a été compilé avec la version R 4.3.2\n\n\n#&gt; Warning: le package 'tidyr' a été compilé avec la version R 4.3.2\n\n\n#&gt; Warning: le package 'readr' a été compilé avec la version R 4.3.2\n\n\n#&gt; Warning: le package 'purrr' a été compilé avec la version R 4.3.2\n\n\n#&gt; Warning: le package 'dplyr' a été compilé avec la version R 4.3.2\n\n\n#&gt; Warning: le package 'stringr' a été compilé avec la version R 4.3.2\n\n\n#&gt; Warning: le package 'forcats' a été compilé avec la version R 4.3.2\n\n\n#&gt; Warning: le package 'lubridate' a été compilé avec la version R 4.3.2\n\n\n#&gt; ── Attaching core tidyverse packages ──────────────────────── tidyverse 2.0.0 ──\n#&gt; ✔ dplyr     1.1.4     ✔ readr     2.1.4\n#&gt; ✔ forcats   1.0.0     ✔ stringr   1.5.0\n#&gt; ✔ ggplot2   3.4.4     ✔ tibble    3.2.1\n#&gt; ✔ lubridate 1.9.3     ✔ tidyr     1.3.0\n#&gt; ✔ purrr     1.0.2     \n#&gt; ── Conflicts ────────────────────────────────────────── tidyverse_conflicts() ──\n#&gt; ✖ dplyr::filter() masks stats::filter()\n#&gt; ✖ dplyr::lag()    masks stats::lag()\n#&gt; ℹ Use the conflicted package (&lt;http://conflicted.r-lib.org/&gt;) to force all conflicts to become errors\n\nhospdd &lt;- readRDS(\"hospdd.rds\")\ntreated &lt;- hospdd%&gt;% filter(procedure==1&month&gt;3)%&gt;%pull(hospital)\ncontrol &lt;- hospdd%&gt;% filter(procedure==0&month&gt;3)%&gt;%pull(hospital)\nView(treated)\nView(control)\nsatis_treated_before_treatment &lt;- hospdd%&gt;% filter(hospdd$hospital %in% treated==TRUE,month&lt;4)%&gt;% pull(satis)\nmean(satis_treated_before_treatment)\n\n#&gt; [1] 3.525383\n\nsatis_treated_after_treatment &lt;- hospdd%&gt;% filter(hospdd$hospital %in% treated==TRUE,month&gt;3)%&gt;% pull(satis)\nmean(satis_treated_after_treatment)\n\n#&gt; [1] 4.363351\n\nsatis_control_before_treatment &lt;- hospdd%&gt;% filter(hospdd$hospital %in% control==TRUE,month&lt;4)%&gt;% pull(satis)\nmean(satis_control_before_treatment)\n\n#&gt; [1] 3.392509\n\nsatis_control_after_treatment &lt;- hospdd%&gt;% filter(hospdd$hospital %in% control==TRUE,month&gt;3)%&gt;% pull(satis)\nmean(satis_control_after_treatment)\n\n#&gt; [1] 3.38249\n\n\n\n# Step 1: Difference between treatment and control group BEFORE treatment\n satis_treated_before_treatment &lt;- hospdd%&gt;% filter(hospdd$hospital %in% treated==TRUE,month&lt;4)%&gt;% pull(satis)\n\nsatis_treated_after_treatment &lt;- hospdd%&gt;% filter(hospdd$hospital %in% treated==TRUE,month&gt;3)%&gt;% pull(satis)\n\nsatis_control_before_treatment &lt;- hospdd%&gt;% filter(hospdd$hospital %in% control==TRUE,month&lt;4)%&gt;% pull(satis)\n\nsatis_control_after_treatment &lt;- hospdd%&gt;% filter(hospdd$hospital %in% control==TRUE,month&gt;3)%&gt;% pull(satis)\n\n# Difference between treatment and control group BEFORE treatment\ndiff_before_treat &lt;- c(satis_treated_before_treatment,replicate(620,0)) - satis_control_before_treatment\n\n# Difference between treatment and control group AFTER treatment\ndiff_after_treat &lt;- c(satis_treated_after_treatment,replicate(620,0)) - satis_control_after_treatment\n\n\nafter &lt;- as.numeric(ifelse(hospdd$month &gt; 4, 1, 0))\n\nsummary(lm(satis ~ (month*after+month+hospital) , data = hospdd))\n\n#&gt; \n#&gt; Call:\n#&gt; lm(formula = satis ~ (month * after + month + hospital), data = hospdd)\n#&gt; \n#&gt; Residuals:\n#&gt;     Min      1Q  Median      3Q     Max \n#&gt; -3.3090 -0.6691 -0.0823  0.5790  5.7455 \n#&gt; \n#&gt; Coefficients:\n#&gt;               Estimate Std. Error t value Pr(&gt;|t|)    \n#&gt; (Intercept)  3.7091739  0.0376799  98.439  &lt; 2e-16 ***\n#&gt; month        0.0953431  0.0128433   7.424 1.27e-13 ***\n#&gt; after        0.4872791  0.1469238   3.317 0.000916 ***\n#&gt; hospital    -0.0175982  0.0008725 -20.169  &lt; 2e-16 ***\n#&gt; month:after -0.0962388  0.0269404  -3.572 0.000356 ***\n#&gt; ---\n#&gt; Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1\n#&gt; \n#&gt; Residual standard error: 1.016 on 7363 degrees of freedom\n#&gt; Multiple R-squared:  0.07369,    Adjusted R-squared:  0.07318 \n#&gt; F-statistic: 146.4 on 4 and 7363 DF,  p-value: &lt; 2.2e-16\n\nsummary(lm(satis ~ month*after+as.factor(hospdd$month) + as.factor(hospdd$hospital) , data = hospdd ))\n\n#&gt; \n#&gt; Call:\n#&gt; lm(formula = satis ~ month * after + as.factor(hospdd$month) + \n#&gt;     as.factor(hospdd$hospital), data = hospdd)\n#&gt; \n#&gt; Residuals:\n#&gt;     Min      1Q  Median      3Q     Max \n#&gt; -3.4357 -0.4930 -0.0120  0.4755  4.5398 \n#&gt; \n#&gt; Coefficients: (3 not defined because of singularities)\n#&gt;                               Estimate Std. Error t value Pr(&gt;|t|)    \n#&gt; (Intercept)                   3.426688   0.067458  50.798  &lt; 2e-16 ***\n#&gt; month                        -0.007357   0.035116  -0.209 0.834068    \n#&gt; after                         0.385583   0.194728   1.980 0.047728 *  \n#&gt; as.factor(hospdd$month)2     -0.002251   0.046454  -0.048 0.961353    \n#&gt; as.factor(hospdd$month)3      0.036682   0.076533   0.479 0.631746    \n#&gt; as.factor(hospdd$month)4      0.371424   0.109650   3.387 0.000709 ***\n#&gt; as.factor(hospdd$month)5     -0.012922   0.060823  -0.212 0.831761    \n#&gt; as.factor(hospdd$month)6            NA         NA      NA       NA    \n#&gt; as.factor(hospdd$month)7            NA         NA      NA       NA    \n#&gt; as.factor(hospdd$hospital)2   0.408566   0.080413   5.081 3.85e-07 ***\n#&gt; as.factor(hospdd$hospital)3   0.533625   0.082596   6.461 1.11e-10 ***\n#&gt; as.factor(hospdd$hospital)4   0.227510   0.076977   2.956 0.003131 ** \n#&gt; as.factor(hospdd$hospital)5  -0.145353   0.076977  -1.888 0.059030 .  \n#&gt; as.factor(hospdd$hospital)6   0.447863   0.076977   5.818 6.20e-09 ***\n#&gt; as.factor(hospdd$hospital)7   1.404416   0.074390  18.879  &lt; 2e-16 ***\n#&gt; as.factor(hospdd$hospital)8   0.071876   0.079452   0.905 0.365685    \n#&gt; as.factor(hospdd$hospital)9  -1.518515   0.081457 -18.642  &lt; 2e-16 ***\n#&gt; as.factor(hospdd$hospital)10  1.682845   0.080413  20.927  &lt; 2e-16 ***\n#&gt; as.factor(hospdd$hospital)11  0.220965   0.079452   2.781 0.005431 ** \n#&gt; as.factor(hospdd$hospital)12 -0.095303   0.081457  -1.170 0.242047    \n#&gt; as.factor(hospdd$hospital)13  0.495593   0.078564   6.308 2.99e-10 ***\n#&gt; as.factor(hospdd$hospital)14  0.233043   0.082596   2.821 0.004793 ** \n#&gt; as.factor(hospdd$hospital)15 -0.144494   0.082596  -1.749 0.080263 .  \n#&gt; as.factor(hospdd$hospital)16  1.414268   0.080413  17.588  &lt; 2e-16 ***\n#&gt; as.factor(hospdd$hospital)17  0.423543   0.083843   5.052 4.49e-07 ***\n#&gt; as.factor(hospdd$hospital)18  0.153276   0.097668   1.569 0.116609    \n#&gt; as.factor(hospdd$hospital)19 -1.169296   0.082596 -14.157  &lt; 2e-16 ***\n#&gt; as.factor(hospdd$hospital)20 -0.376607   0.080413  -4.683 2.87e-06 ***\n#&gt; as.factor(hospdd$hospital)21  0.770343   0.085215   9.040  &lt; 2e-16 ***\n#&gt; as.factor(hospdd$hospital)22  0.375321   0.083843   4.476 7.70e-06 ***\n#&gt; as.factor(hospdd$hospital)23  0.277726   0.082596   3.362 0.000776 ***\n#&gt; as.factor(hospdd$hospital)24 -0.732120   0.088421  -8.280  &lt; 2e-16 ***\n#&gt; as.factor(hospdd$hospital)25  0.222480   0.094875   2.345 0.019055 *  \n#&gt; as.factor(hospdd$hospital)26 -0.209747   0.080413  -2.608 0.009116 ** \n#&gt; as.factor(hospdd$hospital)27 -0.822648   0.077742 -10.582  &lt; 2e-16 ***\n#&gt; as.factor(hospdd$hospital)28  0.288001   0.085215   3.380 0.000729 ***\n#&gt; as.factor(hospdd$hospital)29 -0.175443   0.081457  -2.154 0.031288 *  \n#&gt; as.factor(hospdd$hospital)30 -0.591916   0.097668  -6.060 1.42e-09 ***\n#&gt; as.factor(hospdd$hospital)31  0.088091   0.080413   1.095 0.273344    \n#&gt; as.factor(hospdd$hospital)32 -0.747340   0.081457  -9.175  &lt; 2e-16 ***\n#&gt; as.factor(hospdd$hospital)33 -0.877969   0.080413 -10.918  &lt; 2e-16 ***\n#&gt; as.factor(hospdd$hospital)34 -0.424406   0.075599  -5.614 2.05e-08 ***\n#&gt; as.factor(hospdd$hospital)35 -0.069883   0.077742  -0.899 0.368729    \n#&gt; as.factor(hospdd$hospital)36  1.714149   0.078564  21.818  &lt; 2e-16 ***\n#&gt; as.factor(hospdd$hospital)37 -0.283590   0.094875  -2.989 0.002807 ** \n#&gt; as.factor(hospdd$hospital)38 -0.510800   0.079452  -6.429 1.36e-10 ***\n#&gt; as.factor(hospdd$hospital)39 -0.447491   0.083843  -5.337 9.72e-08 ***\n#&gt; as.factor(hospdd$hospital)40  0.697539   0.079452   8.779  &lt; 2e-16 ***\n#&gt; as.factor(hospdd$hospital)41 -0.573729   0.077742  -7.380 1.76e-13 ***\n#&gt; as.factor(hospdd$hospital)42  0.457143   0.086733   5.271 1.40e-07 ***\n#&gt; as.factor(hospdd$hospital)43 -1.196426   0.082596 -14.485  &lt; 2e-16 ***\n#&gt; as.factor(hospdd$hospital)44 -0.389582   0.092446  -4.214 2.54e-05 ***\n#&gt; as.factor(hospdd$hospital)45 -0.637743   0.077742  -8.203 2.74e-16 ***\n#&gt; as.factor(hospdd$hospital)46 -0.345502   0.083843  -4.121 3.82e-05 ***\n#&gt; month:after                         NA         NA      NA       NA    \n#&gt; ---\n#&gt; Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1\n#&gt; \n#&gt; Residual standard error: 0.7536 on 7316 degrees of freedom\n#&gt; Multiple R-squared:  0.4941, Adjusted R-squared:  0.4905 \n#&gt; F-statistic: 140.1 on 51 and 7316 DF,  p-value: &lt; 2.2e-16\n\n\"The  difference between the two methods is that when you consider the variables month and hospital as a factor, it forms a vector of values from these variables.\"\n\n#&gt; [1] \"The  difference between the two methods is that when you consider the variables month and hospital as a factor, it forms a vector of values from these variables.\""
  },
  {
    "objectID": "content/01_journal/01_probability.html",
    "href": "content/01_journal/01_probability.html",
    "title": "Probability Theory",
    "section": "",
    "text": "prob_of_s &lt;- 0.3\nprob_of_sbar &lt;- 0.7\nprob_of_t_knowing_s &lt;- 0.2\nprob_of_tbar_knowing_s&lt;- 0.8\nprob_of_t_knowing_sbar&lt;- 0.6\nprob_of_tbar_knowing_sbar &lt;- 0.4\n\nprob_of_s_and_t &lt;- prob_of_t_knowing_s*prob_of_s\nprint(\"prob_of_s_and_t:\")\n\n#&gt; [1] \"prob_of_s_and_t:\"\n\nprint(prob_of_s_and_t)\n\n#&gt; [1] 0.06\n\nprob_of_s_and_tbar &lt;- prob_of_tbar_knowing_s*prob_of_s\nprint(\"prob_of_s_and_tbar:\")\n\n#&gt; [1] \"prob_of_s_and_tbar:\"\n\nprint(prob_of_s_and_tbar)\n\n#&gt; [1] 0.24\n\nprob_of_sbar_and_t &lt;- prob_of_t_knowing_sbar*prob_of_sbar\nprint(\"prob_of_sbar_and_t:\")\n\n#&gt; [1] \"prob_of_sbar_and_t:\"\n\nprint(prob_of_sbar_and_t)\n\n#&gt; [1] 0.42\n\nprob_of_sbar_and_tbar &lt;- prob_of_tbar_knowing_sbar*prob_of_sbar\nprint(\"prob_of_sbar_and_tbar:\")\n\n#&gt; [1] \"prob_of_sbar_and_tbar:\"\n\nprint(prob_of_sbar_and_tbar)\n\n#&gt; [1] 0.28\n\n\nThe percentage of customers using all three devices = 0.5%\nThe percentage of customers using at least two devices = 8.8% + 7.3% +3.3% = 19.4%\nThe percentage of customers using only one device = 42.3% + 10% + 27.8% = 80.1%\n\nprob_of_a&lt;- 0.04\nprob_of_b_knowing_a &lt;- 0.97\nprob_of_b_knowing_abar&lt;- 0.01\n\nprob_of_abar= 1-prob_of_a\nprob_of_abar_knowing_b &lt;- (prob_of_b_knowing_abar*prob_of_abar)/((prob_of_b_knowing_abar*prob_of_abar)+(prob_of_b_knowing_a*prob_of_a))\nprint(\"prob_of_abar_knowing_b:\")\n\n#&gt; [1] \"prob_of_abar_knowing_b:\"\n\nprint(prob_of_abar_knowing_b)\n\n#&gt; [1] 0.1983471\n\nprob_of_a_knowing_b &lt;- (prob_of_b_knowing_a*prob_of_a)/((prob_of_b_knowing_abar*prob_of_abar)+(prob_of_b_knowing_a*prob_of_a))\nprint(\"prob_of_a_knowing_b:\")\n\n#&gt; [1] \"prob_of_a_knowing_b:\"\n\nprint(prob_of_a_knowing_b)\n\n#&gt; [1] 0.8016529"
  },
  {
    "objectID": "content/01_journal/01_probability.html#header-2",
    "href": "content/01_journal/01_probability.html#header-2",
    "title": "Probability Theory",
    "section": "2.1 Header 2",
    "text": "2.1 Header 2\n\nHeader 3\n\nHeader 4\n\nHeader 5\n\nHeader 6"
  },
  {
    "objectID": "content/01_journal/03_regression.html",
    "href": "content/01_journal/03_regression.html",
    "title": "Regression and Statistical Inference",
    "section": "",
    "text": "car_prices &lt;- readRDS(\"car_prices.rds\")\nView(car_prices)\ndim(car_prices)\n\n#&gt; [1] 181  22\n\nstr(car_prices)\n\n#&gt; Classes 'tbl_df', 'tbl' and 'data.frame':    181 obs. of  22 variables:\n#&gt;  $ aspiration      : chr  \"std\" \"std\" \"std\" \"std\" ...\n#&gt;  $ doornumber      : chr  \"two\" \"two\" \"two\" \"four\" ...\n#&gt;  $ carbody         : chr  \"convertible\" \"convertible\" \"hatchback\" \"sedan\" ...\n#&gt;  $ drivewheel      : chr  \"rwd\" \"rwd\" \"rwd\" \"fwd\" ...\n#&gt;  $ enginelocation  : chr  \"front\" \"front\" \"front\" \"front\" ...\n#&gt;  $ wheelbase       : num  88.6 88.6 94.5 99.8 99.4 ...\n#&gt;  $ carlength       : num  169 169 171 177 177 ...\n#&gt;  $ carwidth        : num  64.1 64.1 65.5 66.2 66.4 66.3 71.4 71.4 71.4 67.9 ...\n#&gt;  $ carheight       : num  48.8 48.8 52.4 54.3 54.3 53.1 55.7 55.7 55.9 52 ...\n#&gt;  $ curbweight      : num  2548 2548 2823 2337 2824 ...\n#&gt;  $ enginetype      : chr  \"dohc\" \"dohc\" \"ohcv\" \"ohc\" ...\n#&gt;  $ cylindernumber  : chr  \"four\" \"four\" \"six\" \"four\" ...\n#&gt;  $ enginesize      : num  130 130 152 109 136 136 136 136 131 131 ...\n#&gt;  $ fuelsystem      : chr  \"mpfi\" \"mpfi\" \"mpfi\" \"mpfi\" ...\n#&gt;  $ boreratio       : num  3.47 3.47 2.68 3.19 3.19 3.19 3.19 3.19 3.13 3.13 ...\n#&gt;  $ stroke          : num  2.68 2.68 3.47 3.4 3.4 3.4 3.4 3.4 3.4 3.4 ...\n#&gt;  $ compressionratio: num  9 9 9 10 8 8.5 8.5 8.5 8.3 7 ...\n#&gt;  $ horsepower      : num  111 111 154 102 115 110 110 110 140 160 ...\n#&gt;  $ peakrpm         : num  5000 5000 5000 5500 5500 5500 5500 5500 5500 5500 ...\n#&gt;  $ citympg         : num  21 21 19 24 18 19 19 19 17 16 ...\n#&gt;  $ highwaympg      : num  27 27 26 30 22 25 25 25 20 22 ...\n#&gt;  $ price           : num  13495 16500 16500 13950 17450 ...\n\nhead(car_prices)\n\n\n\n  \n\n\ntail(car_prices)\n\n\n\n  \n\n\nmodelall &lt;- lm(price~.,data= car_prices)\nsummary(modelall)\n\n#&gt; \n#&gt; Call:\n#&gt; lm(formula = price ~ ., data = car_prices)\n#&gt; \n#&gt; Residuals:\n#&gt;    Min     1Q Median     3Q    Max \n#&gt;  -5662  -1120      0    798   9040 \n#&gt; \n#&gt; Coefficients:\n#&gt;                        Estimate Std. Error t value Pr(&gt;|t|)    \n#&gt; (Intercept)          -36269.965  15460.866  -2.346 0.020354 *  \n#&gt; aspirationturbo        1846.206   1041.391   1.773 0.078386 .  \n#&gt; doornumbertwo           242.523    571.929   0.424 0.672172    \n#&gt; carbodyhardtop        -3691.743   1424.825  -2.591 0.010561 *  \n#&gt; carbodyhatchback      -3344.335   1238.359  -2.701 0.007757 ** \n#&gt; carbodysedan          -2292.820   1356.014  -1.691 0.093043 .  \n#&gt; carbodywagon          -3427.921   1490.285  -2.300 0.022885 *  \n#&gt; drivewheelfwd          -504.564   1076.623  -0.469 0.640030    \n#&gt; drivewheelrwd           -15.446   1268.070  -0.012 0.990299    \n#&gt; enginelocationrear     6643.492   2572.275   2.583 0.010806 *  \n#&gt; wheelbase               -30.197     92.776  -0.325 0.745294    \n#&gt; carlength               -29.740     51.672  -0.576 0.565824    \n#&gt; carwidth                731.819    244.533   2.993 0.003258 ** \n#&gt; carheight               123.195    134.607   0.915 0.361617    \n#&gt; curbweight                2.612      1.781   1.467 0.144706    \n#&gt; enginetypedohcv       -8541.957   4749.685  -1.798 0.074219 .  \n#&gt; enginetypel             978.748   1786.384   0.548 0.584619    \n#&gt; enginetypeohc          3345.252    933.001   3.585 0.000461 ***\n#&gt; enginetypeohcf          972.919   1625.631   0.598 0.550462    \n#&gt; enginetypeohcv        -6222.322   1236.415  -5.033 1.43e-06 ***\n#&gt; cylindernumberfive   -11724.540   3019.192  -3.883 0.000157 ***\n#&gt; cylindernumberfour   -11549.326   3177.177  -3.635 0.000387 ***\n#&gt; cylindernumbersix     -7151.398   2247.230  -3.182 0.001793 ** \n#&gt; cylindernumberthree   -4318.929   4688.833  -0.921 0.358545    \n#&gt; cylindernumbertwelve -11122.209   4196.494  -2.650 0.008946 ** \n#&gt; enginesize              125.934     26.541   4.745 5.00e-06 ***\n#&gt; fuelsystem2bbl          177.136    883.615   0.200 0.841400    \n#&gt; fuelsystemmfi         -3041.018   2576.996  -1.180 0.239934    \n#&gt; fuelsystemmpfi          359.278   1001.529   0.359 0.720326    \n#&gt; fuelsystemspdi        -2543.890   1363.546  -1.866 0.064140 .  \n#&gt; fuelsystemspfi          514.766   2499.229   0.206 0.837107    \n#&gt; boreratio             -1306.740   1642.221  -0.796 0.427516    \n#&gt; stroke                -4527.137    922.732  -4.906 2.49e-06 ***\n#&gt; compressionratio       -737.901    555.960  -1.327 0.186539    \n#&gt; horsepower               10.293     22.709   0.453 0.651035    \n#&gt; peakrpm                   2.526      0.634   3.983 0.000108 ***\n#&gt; citympg                 -90.352    166.647  -0.542 0.588538    \n#&gt; highwaympg              154.858    167.148   0.926 0.355761    \n#&gt; ---\n#&gt; Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1\n#&gt; \n#&gt; Residual standard error: 2189 on 143 degrees of freedom\n#&gt; Multiple R-squared:  0.9415, Adjusted R-squared:  0.9264 \n#&gt; F-statistic: 62.21 on 37 and 143 DF,  p-value: &lt; 2.2e-16\n\n\"The most significant parameters are:enginetype(ohc and ohcv),cylindernumber(five, four,six and twelve), enginesize,stroke,peakrpm,carwidth,carbody(hardtop, hatchback and wagon),enginelocation(rear)\"\n\n#&gt; [1] \"The most significant parameters are:enginetype(ohc and ohcv),cylindernumber(five, four,six and twelve), enginesize,stroke,peakrpm,carwidth,carbody(hardtop, hatchback and wagon),enginelocation(rear)\"\n\nconfint(modelall, level = 0.95)\n\n#&gt;                              2.5 %       97.5 %\n#&gt; (Intercept)          -6.683134e+04 -5708.591461\n#&gt; aspirationturbo      -2.123031e+02  3904.715423\n#&gt; doornumbertwo        -8.880057e+02  1373.051204\n#&gt; carbodyhardtop       -6.508183e+03  -875.302661\n#&gt; carbodyhatchback     -5.792190e+03  -896.479709\n#&gt; carbodysedan         -4.973242e+03   387.602227\n#&gt; carbodywagon         -6.373755e+03  -482.087396\n#&gt; drivewheelfwd        -2.632717e+03  1623.588215\n#&gt; drivewheelrwd        -2.522030e+03  2491.138949\n#&gt; enginelocationrear    1.558895e+03 11728.088662\n#&gt; wheelbase            -2.135865e+02   153.193109\n#&gt; carlength            -1.318793e+02    72.399687\n#&gt; carwidth              2.484517e+02  1215.185989\n#&gt; carheight            -1.428819e+02   389.272214\n#&gt; curbweight           -9.086424e-01     6.132334\n#&gt; enginetypedohcv      -1.793062e+04   846.708835\n#&gt; enginetypel          -2.552383e+03  4509.878243\n#&gt; enginetypeohc         1.500996e+03  5189.507548\n#&gt; enginetypeohcf       -2.240453e+03  4186.291965\n#&gt; enginetypeohcv       -8.666335e+03 -3778.310183\n#&gt; cylindernumberfive   -1.769255e+04 -5756.526294\n#&gt; cylindernumberfour   -1.782963e+04 -5269.025514\n#&gt; cylindernumbersix    -1.159348e+04 -2709.316066\n#&gt; cylindernumberthree  -1.358731e+04  4949.451134\n#&gt; cylindernumbertwelve -1.941739e+04 -2827.032165\n#&gt; enginesize            7.347203e+01   178.396665\n#&gt; fuelsystem2bbl       -1.569500e+03  1923.771576\n#&gt; fuelsystemmfi        -8.134945e+03  2052.909867\n#&gt; fuelsystemmpfi       -1.620436e+03  2338.991505\n#&gt; fuelsystemspdi       -5.239202e+03   151.421288\n#&gt; fuelsystemspfi       -4.425440e+03  5454.972678\n#&gt; boreratio            -4.552905e+03  1939.424404\n#&gt; stroke               -6.351094e+03 -2703.179801\n#&gt; compressionratio     -1.836863e+03   361.059971\n#&gt; horsepower           -3.459530e+01    55.182371\n#&gt; peakrpm               1.272152e+00     3.778780\n#&gt; citympg              -4.197613e+02   239.056414\n#&gt; highwaympg           -1.755422e+02   485.258537\n\ntypeof(car_prices$carwidth)\n\n#&gt; [1] \"double\"\n\nplot(car_prices$carwidth, car_prices$price)\nabline(lm(car_prices$price ~ car_prices$carwidth))\n\n\n\n\n\n\n\n\"As the width of the car increases, as its price increases. If we increase the width with about 2 units, the car price increases with about 5000 units\"\n\n#&gt; [1] \"As the width of the car increases, as its price increases. If we increase the width with about 2 units, the car price increases with about 5000 units\"\n\nmodelimp &lt;- lm(price~carwidth, data=car_prices)\nsummary(modelimp)\n\n#&gt; \n#&gt; Call:\n#&gt; lm(formula = price ~ carwidth, data = car_prices)\n#&gt; \n#&gt; Residuals:\n#&gt;      Min       1Q   Median       3Q      Max \n#&gt; -11461.9  -2736.1   -870.9    589.5  26156.7 \n#&gt; \n#&gt; Coefficients:\n#&gt;              Estimate Std. Error t value Pr(&gt;|t|)    \n#&gt; (Intercept) -174994.0    12663.2  -13.82   &lt;2e-16 ***\n#&gt; carwidth       2859.5      192.5   14.85   &lt;2e-16 ***\n#&gt; ---\n#&gt; Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1\n#&gt; \n#&gt; Residual standard error: 5415 on 179 degrees of freedom\n#&gt; Multiple R-squared:  0.5521, Adjusted R-squared:  0.5496 \n#&gt; F-statistic: 220.6 on 1 and 179 DF,  p-value: &lt; 2.2e-16\n\nsprintf(\"Adjusted R^2: %.2f\", broom::glance(modelall)$adj.r.squared)\n\n#&gt; [1] \"Adjusted R^2: 0.93\"\n\nsprintf(\"Adjusted R^2: %.2f\", broom::glance(modelimp)$adj.r.squared)\n\n#&gt; [1] \"Adjusted R^2: 0.55\"\n\nsprintf(\"AIC: %.2f\", AIC(modelall))\n\n#&gt; [1] \"AIC: 3333.26\"\n\nsprintf(\"AIC: %.2f\", AIC(modelimp))\n\n#&gt; [1] \"AIC: 3629.73\"\n\nconfint(modelimp, level = 0.95)\n\n#&gt;                   2.5 %     97.5 %\n#&gt; (Intercept) -199982.432 -150005.56\n#&gt; carwidth       2479.573    3239.36\n\n\"p-value: &lt; 2.2e-16. So, the effect of the variable carwidth is statistically significant\"\n\n#&gt; [1] \"p-value: &lt; 2.2e-16. So, the effect of the variable carwidth is statistically significant\"\n\n\n\nlibrary(dplyr)\n\n#&gt; Warning: le package 'dplyr' a été compilé avec la version R 4.3.2\n\n\n#&gt; \n#&gt; Attachement du package : 'dplyr'\n\n\n#&gt; Les objets suivants sont masqués depuis 'package:stats':\n#&gt; \n#&gt;     filter, lag\n\n\n#&gt; Les objets suivants sont masqués depuis 'package:base':\n#&gt; \n#&gt;     intersect, setdiff, setequal, union\n\nseat_heating &lt;- rep(c(TRUE), times=181)\ncar_prices %&gt;% mutate(seat_heating)\n\n\n\n  \n\n\nmodell &lt;- lm(car_prices$price~seat_heating)\nsummary(modell)\n\n#&gt; \n#&gt; Call:\n#&gt; lm(formula = car_prices$price ~ seat_heating)\n#&gt; \n#&gt; Residuals:\n#&gt;    Min     1Q Median     3Q    Max \n#&gt;  -7881  -5390  -3019   3431  32401 \n#&gt; \n#&gt; Coefficients: (1 not defined because of singularities)\n#&gt;                  Estimate Std. Error t value Pr(&gt;|t|)    \n#&gt; (Intercept)       12999.4      599.7   21.68   &lt;2e-16 ***\n#&gt; seat_heatingTRUE       NA         NA      NA       NA    \n#&gt; ---\n#&gt; Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1\n#&gt; \n#&gt; Residual standard error: 8068 on 180 degrees of freedom"
  },
  {
    "objectID": "content/01_journal/10_rdd.html",
    "href": "content/01_journal/10_rdd.html",
    "title": "Regression Discontinuity",
    "section": "",
    "text": "Note\n\n\n\nYou can delete everything in here and start fresh."
  }
]